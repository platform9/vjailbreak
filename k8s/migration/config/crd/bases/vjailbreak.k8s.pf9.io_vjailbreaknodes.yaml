---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.1
  name: vjailbreaknodes.vjailbreak.k8s.pf9.io
spec:
  group: vjailbreak.k8s.pf9.io
  names:
    kind: VjailbreakNode
    listKind: VjailbreakNodeList
    plural: vjailbreaknodes
    singular: vjailbreaknode
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: VjailbreakNode is the Schema for the vjailbreaknodes API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: Spec defines the desired state of VjailbreakNode
            properties:
              imageid:
                description: OpenstackImageID is the image of the VM
                type: string
              noderole:
                description: NodeRole is the role assigned to the node
                type: string
              openstackcreds:
                description: OpenstackCreds is the credentials for Openstack Environment
                properties:
                  apiVersion:
                    description: API version of the referent.
                    type: string
                  fieldPath:
                    description: |-
                      If referring to a piece of an object instead of an entire object, this string
                      should contain a valid JSON/Go field access statement, such as desiredState.manifest.containers[2].
                      For example, if the object reference is to a container within a pod, this would take on a value like:
                      "spec.containers{name}" (where "name" refers to the name of the container that triggered
                      the event) or if no container name is specified "spec.containers[2]" (container with
                      index 2 in this pod). This syntax is chosen only to have some well-defined way of
                      referencing a part of an object.
                    type: string
                  kind:
                    description: |-
                      Kind of the referent.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  name:
                    description: |-
                      Name of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                  namespace:
                    description: |-
                      Namespace of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/
                    type: string
                  resourceVersion:
                    description: |-
                      Specific resourceVersion to which this reference is made, if any.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                    type: string
                  uid:
                    description: |-
                      UID of the referent.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              openstackflavorid:
                description: OpenstackFlavorID is the flavor of the VM
                type: string
            required:
            - imageid
            - noderole
            - openstackcreds
            - openstackflavorid
            type: object
          status:
            description: Status defines the observed state of VjailbreakNode
            properties:
              activemigrations:
                description: ActiveMigrations is the list of active migrations happening
                  on the node
                properties:
                  apiVersion:
                    description: |-
                      APIVersion defines the versioned schema of this representation of an object.
                      Servers should convert recognized schemas to the latest internal value, and
                      may reject unrecognized values.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                    type: string
                  items:
                    description: Items is the list of Migration objects
                    items:
                      description: Migration is the Schema for the migrations API
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          type: object
                        spec:
                          description: Spec defines the desired state of Migration
                          properties:
                            initiateCutover:
                              description: InitiateCutover is the flag to initiate
                                cutover
                              type: boolean
                            migrationPlan:
                              description: MigrationPlan is the name of the migration
                                plan
                              type: string
                            podRef:
                              description: PodRef is the name of the pod
                              type: string
                            vmName:
                              description: VMName is the name of the VM getting migrated
                                from VMWare to Openstack
                              type: string
                          required:
                          - initiateCutover
                          - migrationPlan
                          - podRef
                          - vmName
                          type: object
                        status:
                          description: Status defines the observed state of Migration
                          properties:
                            AgentName:
                              description: AgentName is the name of the agent where
                                migration is running
                              type: string
                            conditions:
                              description: Conditions is the list of conditions of
                                the migration object pod
                              items:
                                description: PodCondition contains details for the
                                  current condition of this pod.
                                properties:
                                  lastProbeTime:
                                    description: Last time we probed the condition.
                                    format: date-time
                                    type: string
                                  lastTransitionTime:
                                    description: Last time the condition transitioned
                                      from one status to another.
                                    format: date-time
                                    type: string
                                  message:
                                    description: Human-readable message indicating
                                      details about last transition.
                                    type: string
                                  reason:
                                    description: Unique, one-word, CamelCase reason
                                      for the condition's last transition.
                                    type: string
                                  status:
                                    description: |-
                                      Status is the status of the condition.
                                      Can be True, False, Unknown.
                                      More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#pod-conditions
                                    type: string
                                  type:
                                    description: |-
                                      Type is the type of the condition.
                                      More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#pod-conditions
                                    type: string
                                required:
                                - status
                                - type
                                type: object
                              type: array
                            phase:
                              description: Phase is the current phase of the migration
                              type: string
                          required:
                          - conditions
                          - phase
                          type: object
                      type: object
                    type: array
                  kind:
                    description: |-
                      Kind is a string value representing the REST resource this object represents.
                      Servers may infer this from the endpoint the client submits requests to.
                      Cannot be updated.
                      In CamelCase.
                      More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                    type: string
                  metadata:
                    description: |-
                      ListMeta describes metadata that synthetic resources must have, including lists and
                      various status objects. A resource may have only one of {ObjectMeta, ListMeta}.
                    properties:
                      continue:
                        description: |-
                          continue may be set if the user set a limit on the number of items returned, and indicates that
                          the server has more data available. The value is opaque and may be used to issue another request
                          to the endpoint that served this list to retrieve the next set of available objects. Continuing a
                          consistent list may not be possible if the server configuration has changed or more than a few
                          minutes have passed. The resourceVersion field returned when using this continue value will be
                          identical to the value in the first response, unless you have received this token from an error
                          message.
                        type: string
                      remainingItemCount:
                        description: |-
                          remainingItemCount is the number of subsequent items in the list which are not included in this
                          list response. If the list request contained label or field selectors, then the number of
                          remaining items is unknown and the field will be left unset and omitted during serialization.
                          If the list is complete (either because it is not chunking or because this is the last chunk),
                          then there are no more remaining items and this field will be left unset and omitted during
                          serialization.
                          Servers older than v1.15 do not set this field.
                          The intended use of the remainingItemCount is *estimating* the size of a collection. Clients
                          should not rely on the remainingItemCount to be set or to be exact.
                        format: int64
                        type: integer
                      resourceVersion:
                        description: |-
                          String that identifies the server's internal version of this object that
                          can be used by clients to determine when objects have changed.
                          Value must be treated as opaque by clients and passed unmodified back to the server.
                          Populated by the system.
                          Read-only.
                          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency
                        type: string
                      selfLink:
                        description: 'Deprecated: selfLink is a legacy read-only field
                          that is no longer populated by the system.'
                        type: string
                    type: object
                required:
                - items
                type: object
              openstackuuid:
                description: OpenstackUUID is the UUID of the VM in OpenStack
                type: string
              phase:
                description: Phase is the current phase of the node
                type: string
              vmip:
                description: VMIP is the IP address of the VM
                type: string
            required:
            - vmip
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
